System.register(["./p-6086d49a.system.js","./p-4fc8d94d.system.js"],(function(e){"use strict";var t,s,i,a,n,r,l,u,c;return{setters:[function(e){t=e.r;s=e.e;i=e.h;a=e.H},function(e){n=e.H;r=e.B;l=e.F;u=e.h;c=e.C}],execute:function(){var o=[{label:"Alle Themen",value:""},{label:"Wie funktioniert die HUK24?",value:"Wie funktioniert die HUK24?",id:1},{label:"Versicherung",value:"Versicherung",id:2,subCategory:[{label:"Alle Versicherungen",value:"",id:0},{label:"Fahrzeuge",value:"Versicherung - Fahrzeuge",id:101},{label:"Rechtsschutz",value:"Versicherung - Rechtsschutz",id:102},{label:"Haftpflicht",value:"Versicherung - Haftpflicht",id:103},{label:"Tierhalter",value:"Versicherung - Tierhalter",id:104},{label:"Hausrat",value:"Versicherung - Hausrat",id:105},{label:"Unfall",value:"Versicherung - Unfall",id:106},{label:"Wohngebäude",value:"Versicherung - Wohngebäude",id:107},{label:"Auslandsreisekranken",value:"Versicherung - Auslandsreisekranken",id:108},{label:"Krankenzusatz",value:"Versicherung - Krankenzusatz",id:109},{label:"Leben",value:"Versicherung - Leben",id:110},{label:"Rente",value:"Versicherung - Rente",id:111},{label:"Berufsunfähigkeit",value:"Versicherung - Berufsunfähigkeit",id:112}]},{label:"Schadenservice",value:"Schadenservice",id:3},{label:"Angebotsspeicher",value:"Angebotsspeicher",id:4},{label:"Login",value:"Login",id:5},{label:"Servicebereich Meine HUK24",value:"Servicebereich Meine HUK24",id:6},{label:"Kunden werben Kunden",value:"Kunden werben Kunden",id:7},{label:"Technische Hilfe",value:"Technische Hilfe",id:8},{label:"Datenschutz",value:"Datenschutz",id:9},{label:"Datensicherheit",value:"Datensicherheit",id:10},{label:"Feedback geben",value:"Feedback geben",id:11}];var h=undefined&&undefined.__decorate||function(e,t,s,i){var a=arguments.length,n=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,s):i,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)if(r=e[l])n=(a<3?r(n):a>3?r(t,s,n):r(t,s))||n;return a>3&&n&&Object.defineProperty(t,s,n),n};var d=e("huk_search_layer",function(){function e(e){var i=this;t(this,e);this.apiUrl="/anonymizer/api/discovery";this.searchCategory="";this.resultsPerPage=10;this.query=undefined;this.textPlaceholder="Frage eingeben";this.labelSearch="Suchen";this.overlayTitle="Informationen suchen und finden";this.textResults="Ergebnisse";this.textMore="mehr";this.labelBack="Zurück";this.searchQuery=undefined;this.stateSelectedItem=null;this.stateSelectedCategory="";this.stateSelectedSubCategory="";this.stateOffset=0;this.stateMatchingResults=0;this.stateLoadResults=false;this.componentName="search-layer";this.sessionId="sessionId123874190";this.clientId="clientid74647";this.categories=o;this.newFetchResults=function(){i.stateOffset=0;i.fetchResults()};this.fetchResults=function(){i.stateLoadResults=true;return fetch(i.apiUrl,{credentials:"include",method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i.searchQuery?i.searchQuery:i.query||"",count:i.resultsPerPage,offset:i.stateOffset,session_id:i.sessionId,client_id:i.clientId,category:i.stateSelectedSubCategory&&i.stateSelectedSubCategory!==""?i.stateSelectedSubCategory:i.stateSelectedCategory})}).catch((function(){i.stateLoadResults=false;return Promise.reject("no search possible")})).then((function(e){i.stateLoadResults=false;if(e.status===500){i.stateItems=[];i.stateMatchingResults=0;return Promise.reject("no results found")}return e})).then((function(e){return e.json()})).then((function(e){if(e&&e.result){n.trackSearch({eventLabel:i.searchQuery,eventTarget:"",eventValue:e.result.matchingResults,componentName:"",elementName:"",clickId:""});i.stateItems=e.result.documents;var t=/<a\s+(?:[^>]*?\s+)?href=(\"textobj:\/\/)(\d*)\">/g;i.stateItems.forEach((function(e){if(e.html){e.html=e.html.replace(t,'<a href="/selfservice.do?show=1&ma=true&docid=$2" target="_blank">')}}));i.stateMatchingResults=e.result.matchingResults}}))};this.loadMore=function(){i.stateOffset=i.stateOffset===0?i.resultsPerPage:i.stateOffset+i.resultsPerPage;i.fetchResults()};this.loadBack=function(){i.stateOffset=i.stateOffset===0?i.resultsPerPage:i.stateOffset-i.resultsPerPage;i.fetchResults()};this.onCategoryChange=function(e){i.stateSelectedSubCategory="";i.stateSelectedCategory=e;i.fetchResults()};this.renderSubSelectBox=function(){var e=i.categories.find((function(e){return e.value===i.stateSelectedCategory}));if(e&&e.subCategory&&e.subCategory.length>0){return i.renderSelectBox(e.subCategory,i.stateSelectedSubCategory,(function(e){if(!!e){i.stateSelectedSubCategory=e;i.fetchResults()}}))}return};this.closed=s(this,"closed",3)}e.prototype.componentWillLoad=function(){this.stateSelectedCategory=this.searchCategory;if(this.searchCategory.indexOf(" - ")!==-1){var e=this.searchCategory.split(" - ");this.stateSelectedCategory=e[0];this.stateSelectedSubCategory=this.searchCategory}this.searchQuery=this.query;this.fetchResults()};e.prototype.renderSelectBox=function(e,t,s){var a=this;return(i("form",{class:r(this,"styled-select"),onSubmit:function(){return false}},i("select",{class:r(this,"select"),onChange:function(e){if(!s){return a.onCategoryChange(e.target.value||"")}s(e.target.value)}},e.map((function(e){var s={};if(t===e.value){s={selected:true}}return i("option",Object.assign({},s,{value:e.value}),e.label)}))),i("div",{class:r(this,"down-icon")},i("huk-icon",{clickable:true,icon:"arrow-down--neutral-600"}))))};e.prototype.renderSearchButton=function(){var e=this;return i("huk-button",{loading:this.stateLoadResults,label:this.labelSearch,variant:"cta",modifier:"small forward",onClicked:function(){return e.newFetchResults()}})};e.prototype.renderResultOverview=function(){var e=this;return i("div",{class:r(this,"view-overview")},i("div",{class:r(this,"select-box-wrapper")},this.renderSelectBox(this.categories,this.stateSelectedCategory),this.renderSubSelectBox()),i("div",{class:r(this,"field-wrapper")},i("div",{class:r(this,"input-content")},i("div",{class:r(this,"input-icon")}," ",i("huk-icon",{icon:"search"})),i("input",{type:"text",class:r(this,"input"),value:this.searchQuery,onChange:function(t){e.searchQuery=t.target.value},onKeyPress:function(t){if(t.key.toLowerCase()==="enter"){e.searchQuery=t.target.value;e.newFetchResults()}},placeholder:this.textPlaceholder+"..."}),!this.breakpoint.isMobile()&&i("div",{class:r(this,"input-button")},this.renderSearchButton()))),this.breakpoint.isMobile()&&i("div",{class:r(this,"input-button--mobile")},this.renderSearchButton()),this.stateMatchingResults>0&&this.renderItems(),this.stateMatchingResults<1&&this.renderPageination())};e.prototype.renderItems=function(){var e=this;if(!this.stateItems){return null}var t=this.stateOffset!==0;var s=this.stateMatchingResults>=this.resultsPerPage;return i(l,null,this.renderPageination(),i("div",{class:r(this,"list")},this.stateItems.map((function(t){return i("div",{class:r(e,"list-item")},i("a",{onClick:function(){return e.stateSelectedItem={title:t.title,content:t.html}},class:r(e,"list-link")},t.title))})),i("div",{class:r(this,"page-navigation",this.stateLoadResults&&"loading")},t&&i("div",{class:r(this,"page-navigation__button"),onClick:this.loadBack},this.labelBack),t&&s&&"&nbsp; | &nbsp;",s&&i("div",{class:r(this,"page-navigation__button"),onClick:this.loadMore},this.textMore,"..."))))};e.prototype.renderPageination=function(){var e=this;var t=function(){return e.textResults+" "+(e.stateOffset+1)};var s=function(){return e.stateOffset+e.stateMatchingResults};return i("div",{class:r(this,"result-info")},i("strong",null,this.stateMatchingResults<1&&this.textResults+" 0",this.stateMatchingResults>0&&t()+" - "+s()))};e.prototype.renderDetailView=function(){var e=this;return this.stateSelectedItem!==null&&i("div",{class:r(this,"view-detail")},i("div",{class:r(this,"html-content")},i("div",{innerHTML:this.stateSelectedItem.content})),i("div",null,i("huk-button",{label:this.labelBack,modifier:"small",onClicked:function(){return e.stateSelectedItem=null}})))};e.prototype.render=function(){var e=this;var t=u({componentName:this.componentName});return i(a,{class:t},i("huk-overlay",{"teaser-line":this.stateSelectedItem?this.stateSelectedItem.title:this.overlayTitle,onClosed:function(){e.closed.emit()},isVisible:true},i("div",{slot:"overlay",class:r(this,"wrapper")},this.stateSelectedItem!==null?this.renderDetailView():this.renderResultOverview())))};Object.defineProperty(e,"style",{get:function(){return".huk-text--white{color:#fff}.huk-text--orange{color:#fba308}.huk-text--mint{color:#00abba}.huk-text--mint-dark{color:#055e5f}\@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}\@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.search-layer__wrapper{position:relative;padding:2.5rem}.search-layer__select{outline:none}.search-layer__sub-select-box{padding:.5rem 0}.search-layer__input-button--mobile{-ms-flex-pack:end;justify-content:flex-end;display:-ms-flexbox;display:flex}.search-layer__field-wrapper{padding:.5rem 0;position:relative}.search-layer__field-wrapper .search-layer__input-content{display:-ms-flexbox;display:flex;border-radius:.375rem;font-size:23px;border:.0625rem solid #e7e9ea;padding:0 1.5rem;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}\@media (min-width:768px){.search-layer__field-wrapper .search-layer__input-content{min-width:34.0625rem}}.search-layer__field-wrapper .search-layer__input{margin-right:.5rem;outline:none;width:100%;padding:1.5rem 0 1.5rem 1.5rem;border:0}.search-layer__field-wrapper .search-layer__input-icon{font-size:48px}.search-layer__field-wrapper .search-layer__input-button huk-button{margin:0}.search-layer__list{margin:0;padding:0;list-style:none}.search-layer__list-item{display:block;padding:.5rem 0;list-style:none;border-bottom:1px solid #cbcfd2}.search-layer__list-item :before{list-style:none}.search-layer__result-info{padding:3.125rem 0 1rem}.search-layer__list-link{color:#00abba!important;cursor:pointer}.search-layer__html-content{padding:2.5rem 0;overflow:auto}.search-layer__select-box-wrapper{display:block}\@media (min-width:768px){.search-layer__select-box-wrapper{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}}.search-layer__styled-select{border:.0625rem solid #e7e9ea;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:.375rem;overflow:hidden;position:relative;width:100%;margin-bottom:1rem}.search-layer__styled-select select::-ms-expand{display:none}.search-layer__styled-select:first-child{margin-right:1rem}\@media (min-width:768px){.search-layer__styled-select{width:20.25rem;margin-bottom:0}}.search-layer__styled-select .search-layer__select{cursor:pointer;padding:1rem 1.5rem;background:transparent;border:0;font-size:19px;-webkit-appearance:none;width:100%}.search-layer__styled-select .search-layer__select :focus{outline:none}\@media (min-width:768px){.search-layer__styled-select .search-layer__select{width:20.25rem}}.search-layer__styled-select .search-layer__down-icon{pointer-events:none;position:absolute;top:30%;right:5%;font-size:19px}.search-layer__page-navigation{display:-ms-flexbox;display:flex;color:#00abba}.search-layer__page-navigation__button{font-size:16px;font-weight:700;cursor:pointer}.search-layer__page-navigation--loading{color:#e7e9ea;cursor:default}"},enumerable:true,configurable:true});return e}());h([c()],d.prototype,"breakpoint",void 0)}}}));