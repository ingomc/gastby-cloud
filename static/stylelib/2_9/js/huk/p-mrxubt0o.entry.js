import{r as t,h as i,e as s,H as h,c as e}from"./p-8988f6c5.js";import{H as n,V as o,E as a,B as l,F as d,h as r,J as c,C as u,t as m}from"./p-0afcd70e.js";import{g as v}from"./p-a283e139.js";var g=function(t,i,s,h){var e,n=arguments.length,o=n<3?i:null===h?h=Object.getOwnPropertyDescriptor(i,s):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,h);else for(var a=t.length-1;a>=0;a--)(e=t[a])&&(o=(n<3?e(o):n>3?e(i,s,o):e(i,s))||o);return n>3&&o&&Object.defineProperty(i,s,o),o};const p={usernameEmpty:"ALF101",usernameTooShort:"ALF083",passwordEmpty:"ALF102",passwordTooShort:"ALF008",wrongPassword:"ALL136",accountLocked:"ALL273"},_=class{constructor(h){t(this,h),this.myHukText="Meine HUK24",this.myHukTarget="/meine-huk24.jsp",this.label="Anmelden",this.usernameLabelText="Benutzerkennung/-name",this.passwordLabelText="Passwort/PIN",this.submitLabel="Anmelden",this.forgottenLoginCredentialsLabel="Zugangsdaten vergessen",this.forgottenLoginCredentialsLink="/start_pin.do?action=bkpinvergeben",this.welcomeText="Hallo",this.loggedInText="Eingeloggt",this.logoutLabel="Abmelden",this.loginRedirectUrl="/meine-huk24.jsp",this.logoutRedirectUrl="",this.useOla=!1,this.overrideApiEndpoints={},this.overrideErrorMessages={},this.stateIsLoginMenuVisible=!1,this.stateIsAuthenticatedMenuActive=!1,this.stateIsLoginFailedMessageVisible=!1,this.stateLoginFailedMessage="",this.stateUsername="",this.statePassword="",this.stateIsLoginButtonDisabled=!1,this.stateLevelMenu={},this.stateIsPasswordInvalid="not-validated",this.statePasswordInvalidMessage="",this.stateIsUsernameInvalid="not-validated",this.stateUsernameInvalidMessage="",this.stateLoginLoadingStatus=!1,this.stateVisiblePassword=!1,this.componentName="login-block",this._errorMessages=p,this.loginDoUrl="/login.do",this.isInputFocused=!1,this.toggleVisibility=()=>{this.stateIsLoginMenuVisible=!this.stateIsLoginMenuVisible,n.trackAdobeAndNetmind({eventAction:"Schnelllogin",pageUrl:window.location.href,eventLabel:"Anmelden",eventValue:this.stateIsLoginMenuVisible?"open":"close",componentName:"login-block",elementName:this.element.tagName,clickId:this.element.id})},this.toggleAuthenticatedVisibility=()=>{this.stateIsAuthenticatedMenuActive=!this.stateIsAuthenticatedMenuActive,this.toggleMenuFlyoutEvent.emit(this.stateIsAuthenticatedMenuActive?"user-menu":""),this.stateIsAuthenticatedMenuActive||this.clearMenuLevel()},this.loginUser=async t=>(t.preventDefault(),this.validateUsername(),o.isInvalid(this.stateIsUsernameInvalid)?(this.stateIsLoginButtonDisabled=!0,!1):(this.validatePassword(),o.isInvalid(this.stateIsPasswordInvalid)?(this.stateIsLoginButtonDisabled=!0,!1):(this.stateLoginLoadingStatus=!0,this.stateIsLoginFailedMessageVisible=!1,this.stateLoginFailedMessage="",await this.authService.login(this.stateUsername,this.statePassword).then(()=>{this.stateIsLoginMenuVisible=!1,this.stateUsername="",this.statePassword="",this.stateIsPasswordInvalid="not-validated",this.stateIsUsernameInvalid="not-validated"}).catch(t=>{const i=t.errors;let s=i[0];i.length>0&&"TEC001"!==s?("ALL273"===s&&(s="ALL280"),a.getText(s).then(t=>this.stateLoginFailedMessage=t)):window.location.href="/500-fehler.html",this.stateIsLoginFailedMessageVisible=!0,this.statePasswordInvalidMessage="",this.stateUsernameInvalidMessage="",this.stateIsPasswordInvalid="invalid",this.stateIsUsernameInvalid="invalid"}).then(()=>{this.stateLoginLoadingStatus=!1,this.stateIsLoginFailedMessageVisible||this.authService.doLoginRedirect()}),!1))),this.toggleElementActiveClass=t=>{const i=t.target;if(this.breakpoint.isDesktop())return!0;t.preventDefault(),i.classList.toggle("nested-active")},this.handleDesktopLevelMenu=(t,i)=>{this.stateLevelMenu=Object.assign(Object.assign({},this.stateLevelMenu),{[t+1]:i})},this.clearMenuLevel=(t=0)=>{t>=0&&(this.stateLevelMenu=Object.assign(Object.assign({},this.stateLevelMenu),{[t+1]:{},[t+2]:{},[t+3]:{}}))},this.renderMenu=(t,s=!1)=>t?i("div",{class:{[l(this,"menu-section",s&&"has-indent",t.level>=1&&"has-bg")]:!0}},!this.breakpoint.isDesktop()&&i("div",{onClick:this.toggleElementActiveClass,class:l(this,"menu-section__heading")},t.caption),this.breakpoint.isDesktop()&&i("a",{href:this.myHukTarget,onMouseEnter:()=>{this.breakpoint.isDesktop()&&t.level&&this.clearMenuLevel(t.level+1)},class:l(this,"menu-section__heading")},t.caption),t.items&&i("ul",{class:l(this,"menu-section__ul")},t.items.map(t=>i("li",{class:l(this,"menu-section__ul__li")},t.items&&t.items.length?i(d,null,i("a",{class:l(this,"menu-section__ul__li__a","has-arrow","has-dropdown-shadow"),onClick:this.toggleElementActiveClass,onMouseEnter:()=>{this.breakpoint.isDesktop()&&t.level&&this.handleDesktopLevelMenu(t.level,t)},href:t.target,innerHTML:t.caption}),!this.breakpoint.isDesktop()&&this.renderMenu(t,!0)):i("a",{class:l(this,"menu-section__ul__li__a",t.mobile&&"only-mobile"),href:t.target,onMouseEnter:()=>{this.breakpoint.isDesktop()&&this.clearMenuLevel(t.level)},innerHTML:t.caption}))))):"",this.toggleMenuFlyoutEvent=s(this,"toggleMenuFlyoutEvent",7)}get errorMessages(){return this._errorMessages}async componentWillLoad(){this.authService=await v(),await this.authService.configureService(this.overrideApiEndpoints,this.useOla),this.useOla||(this.loginRedirectUrl&&this.authService.setLoginRedirectUrl(this.loginRedirectUrl),this.logoutRedirectUrl&&this.authService.setLogoutRedirectUrl(this.logoutRedirectUrl)),this._errorMessages=Object.assign(Object.assign({},this._errorMessages),this.overrideErrorMessages),this.authService.loginStatus.syncTo(this,"loginStatus"),this.authService.userData.syncTo(this,"userData"),this.authService.userMenu.syncTo(this,"userMenu")}componentDidUnload(){this.authService.loginStatus.forget(this),this.authService.userData.forget(this),this.authService.userMenu.forget(this)}breakpointChanged(){this.stateIsLoginMenuVisible=!1,this.toggleMenuFlyoutEvent.emit("")}toggleHeaderHeroCtaListener(){this.isInputFocused||(this.stateIsLoginMenuVisible=!1)}openEventHandler(t){this.stateIsAuthenticatedMenuActive&&"user-menu"!==t.detail&&(this.stateIsAuthenticatedMenuActive=!1,this.clearMenuLevel())}listenOutsideClicks(t){const i=t.target;if(!this.breakpoint.isDesktop()||i===this.element||i.closest(`.${this.componentName}`))return!1;this.stateIsLoginMenuVisible=!1}validateUsername(){return this.stateUsernameInvalidMessage="",""===this.stateUsername.trim()?(this.stateIsUsernameInvalid="invalid",void a.getText(this.errorMessages.usernameEmpty).then(t=>this.stateUsernameInvalidMessage=t)):this.stateUsername.length<6?(this.stateIsUsernameInvalid="invalid",void a.getText(this.errorMessages.usernameTooShort).then(t=>this.stateUsernameInvalidMessage=t)):void(this.stateIsUsernameInvalid="valid")}validatePassword(){return this.statePasswordInvalidMessage="",""===this.statePassword.trim()?(this.stateIsPasswordInvalid="invalid",void a.getText(this.errorMessages.passwordEmpty).then(t=>this.statePasswordInvalidMessage=t)):this.statePassword.length<8?(this.stateIsPasswordInvalid="invalid",void a.getText(this.errorMessages.passwordTooShort).then(t=>this.statePasswordInvalidMessage=t)):void(this.stateIsPasswordInvalid="valid")}renderUnauthenticated(){return i("div",{class:{[l(this,"unauthenticated")]:!0,"dropdown-visible":this.stateIsLoginMenuVisible}},i("span",{class:l(this,"unauthenticated__dropdown-toggle-btn")},i("huk-button",{onClicked:this.toggleVisibility,icon:"radio--lock",modifier:"small header-login-block",label:this.label})),i("span",{onClick:this.toggleVisibility,class:l(this,"unauthenticated__dropdown-toggle-link")},this.label),i("form",{class:l(this,"login-dropdown"),onSubmit:this.loginUser,autocomplete:"off"},i("huk-input",{onValueChanged:t=>{this.stateUsername=t.detail,this.stateIsUsernameInvalid="not-validated",this.stateIsLoginFailedMessageVisible=!1,this.stateIsLoginButtonDisabled=!1},onBlurred:()=>{this.isInputFocused=!1,this.validateUsername()},onFocussed:t=>{this.isInputFocused=!0,this.breakpoint.isDesktop()||m(t)},name:"username",autocomplete:"off",maxlength:60,value:this.stateUsername,label:this.usernameLabelText,modifier:"small",validity:this.stateIsUsernameInvalid,errorMessage:this.stateUsernameInvalidMessage}),i("huk-input",{onValueChanged:t=>{this.statePassword=t.detail,this.stateIsPasswordInvalid="not-validated",this.stateIsLoginFailedMessageVisible=!1,this.stateIsLoginButtonDisabled=!1},onBlurred:()=>{this.isInputFocused=!1,this.validatePassword()},onFocussed:t=>{this.isInputFocused=!0,this.breakpoint.isDesktop()||m(t)},name:"password",autocomplete:"off",maxlength:16,value:this.statePassword,label:this.passwordLabelText,modifier:"small",type:this.stateVisiblePassword?"text":"password",button:this.stateVisiblePassword?"eye-disabled":"eye",onButtonClicked:()=>{this.stateVisiblePassword=!this.stateVisiblePassword},validity:this.stateIsPasswordInvalid,errorMessage:this.statePasswordInvalidMessage}),this.stateIsLoginFailedMessageVisible&&i("huk-error",{message:this.stateLoginFailedMessage}),i("div",{class:l(this,"login-dropdown__cta-container")},i("div",{class:l(this,"login-dropdown__login-button")},i("huk-button",{loading:this.stateLoginLoadingStatus,variant:"cta",modifier:"small forward pull-right",label:this.submitLabel,buttonType:"submit",disabled:this.stateIsLoginButtonDisabled})),i("div",{class:l(this,"login-dropdown__forgotten-credentials")},i("a",{class:l(this,"login-dropdown__forgotten-credentials__link"),href:this.forgottenLoginCredentialsLink},this.forgottenLoginCredentialsLabel)))))}renderAuthenticated(){return this.authService.userData?(window.location.href.includes(this.loginDoUrl)&&this.authService.doLoginRedirect(),i("div",{class:l(this,"authenticated",this.stateIsAuthenticatedMenuActive&&"is-active")},i("div",{class:l(this,"logged-in-button"),onClick:this.toggleAuthenticatedVisibility},i("huk-icon",{icon:"radio--login",modifier:"sm"}),i("div",null,this.userData&&i("strong",{class:l(this,"salutation-desktop")},this.userData.firstName&&(t=>this.welcomeText+" "+t+".")(this.userData.firstName),!this.userData.firstName&&this.loggedInText),i("span",{class:l(this,"salutation-desktop__my-huk-txt")},this.myHukText))),i("div",{class:l(this,"menu")},i("div",{class:{[l(this,"menu-section__level-wrap")]:this.breakpoint.isDesktop()}},this.userMenu&&this.userMenu.items&&this.userMenu.items.length&&i("div",{class:l(this,"menu-section__level","1")},this.renderMenu(this.userMenu),i("huk-logout-button",{variant:"header-only-desktop",label:this.logoutLabel})),this.breakpoint.isDesktop()&&i(d,null,i("div",{class:l(this,"menu-section__level","2")},this.renderMenu(this.stateLevelMenu[2])),i("div",{class:l(this,"menu-section__level","3")},this.renderMenu(this.stateLevelMenu[3])),i("div",{class:l(this,"menu-section__level","4")},this.renderMenu(this.stateLevelMenu[4]))))))):i("huk-button",{icon:"radio--login",modifier:"small header-login-block",label:this.myHukText,href:this.myHukTarget})}render(){const t=r({componentName:this.componentName});return i(h,{class:t},this.loginStatus?this.renderAuthenticated():this.useOla?i("huk-login-button",{label:this.label}):this.renderUnauthenticated())}get element(){return e(this)}static get style(){return".huk-text--white{color:#fff}.huk-text--orange{color:#fba308}.huk-text--mint{color:#00abba}.huk-text--mint-dark{color:#055e5f}\@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}\@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.login-block{display:block;width:100%}.login-block__unauthenticated.dropdown-visible .login-block__login-dropdown{opacity:1;pointer-events:all;display:block}.login-block__unauthenticated__dropdown-toggle-btn{display:none!important}\@media (min-width:1024px){.login-block__unauthenticated__dropdown-toggle-btn{display:inline-block!important}}.login-block__unauthenticated__dropdown-toggle-btn .dropdown-visible{background-color:#fef1da;-webkit-box-shadow:none;box-shadow:none}.login-block__unauthenticated__dropdown-toggle-link{display:block;font-size:19px;color:#35444c;font-weight:700;padding:1rem 1rem 1rem 1.25rem;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-left:.25rem solid transparent}.login-block__unauthenticated__dropdown-toggle-link:hover{text-decoration:none;color:#35444c}\@media (min-width:1024px){.login-block__unauthenticated__dropdown-toggle-link{display:none}}.login-block__unauthenticated__dropdown-toggle-link:after{background-size:100% 100%;background-size:contain;background-position:50%;background-repeat:no-repeat;display:inline;background-image:url(/stylelib/2_9/img/arrow-down_primary.svg);-webkit-transition:-webkit-transform .25s ease-in-out 0ms;transition:-webkit-transform .25s ease-in-out 0ms;transition:transform .25s ease-in-out 0ms;transition:transform .25s ease-in-out 0ms,-webkit-transform .25s ease-in-out 0ms;content:\"\";display:block;position:absolute;top:1.5rem;right:1.125rem;width:.5rem;height:.5rem;padding-left:20px}\@media (min-width:1024px){.login-block__unauthenticated__dropdown-toggle-link:after{display:none}}.login-block__unauthenticated.dropdown-visible .login-block__unauthenticated__dropdown-toggle-link:after{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.login-block__login-dropdown{padding:1rem;opacity:0;pointer-events:none;display:none}\@media (min-width:1024px){.login-block__login-dropdown{display:block;position:absolute;background-color:#fff;-webkit-box-shadow:0 .625rem 1.25rem .313rem rgba(0,0,0,.1);box-shadow:0 .625rem 1.25rem .313rem rgba(0,0,0,.1);border-radius:.25rem;border:.0625rem solid #e7e9ea;padding:.9375rem;-webkit-transition:opacity .3s ease-in-out 0ms;transition:opacity .3s ease-in-out 0ms;margin-top:.3125rem;width:18.75rem;right:0}}.login-block__login-dropdown huk-error{margin-bottom:1rem}.login-block__login-dropdown__cta-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:end;align-items:flex-end;margin-top:0}.login-block__login-dropdown__forgotten-credentials,.login-block__login-dropdown__login-button{margin-top:0}.login-block__login-dropdown__forgotten-credentials__link{font-size:16px;line-height:1.54;color:#00abba}.login-block__login-dropdown__forgotten-credentials__link:hover{color:#055e5f;text-decoration:none}.login-block__authenticated--is-active .login-block__logged-in-button:after,.login-block__authenticated:hover .login-block__logged-in-button:after{content:\"\";display:block;position:absolute;bottom:0;left:0;right:0;height:.25rem;background:#fba308}.login-block__authenticated--is-active .login-block__menu{display:block}.login-block__menu{background:#fff;position:static}\@media (min-width:1024px){.login-block__menu{display:none;height:31.25rem;position:absolute;left:-12px;right:-12px;top:4.75rem}}.login-block__menu-section{background:#fff;list-style:none}\@media (min-width:1024px){.login-block__menu-section__ul__li .login-block__menu-section{display:none}}.login-block__menu-section__heading:after,.login-block__menu-section__ul__li__a--has-arrow:after{background-size:100% 100%;background-size:contain;background-position:50%;background-repeat:no-repeat;display:inline;background-image:url(/stylelib/2_9/img/arrow-down_primary.svg);-webkit-transition:-webkit-transform .25s ease-in-out 0ms;transition:-webkit-transform .25s ease-in-out 0ms;transition:transform .25s ease-in-out 0ms;transition:transform .25s ease-in-out 0ms,-webkit-transform .25s ease-in-out 0ms;content:\"\";display:block;position:absolute;top:1.5rem;right:1.125rem;width:.5rem;height:.5rem;padding-left:20px}\@media (min-width:1024px){.login-block__menu-section__heading:after,.login-block__menu-section__ul__li__a--has-arrow:after{display:none}}\@media (max-width:1023.98px){.login-block__menu-section__heading+.login-block__menu-section__ul,.login-block__menu-section__ul__li__a+.login-block__menu-section{display:none}.login-block__menu-section__heading.nested-active+.login-block__menu-section__ul,.login-block__menu-section__ul__li__a.nested-active+.login-block__menu-section{display:block!important}.login-block__menu-section__heading.nested-active+.login-block__menu-section__ul>.login-block__menu-section__ul,.login-block__menu-section__ul__li__a.nested-active+.login-block__menu-section>.login-block__menu-section__ul{display:block}}.login-block__menu-section--has-indent{padding-left:.5rem}\@media (min-width:1024px){.login-block__menu-section--has-indent{width:calc(100% + 1px);left:calc(100% + 1px);margin-left:0;padding-left:0}}.login-block__menu-section--has-bg{background-color:#f7f7f8}\@media (min-width:1024px){.login-block__menu-section--has-bg{background-color:transparent}}.login-block__menu-section__heading{cursor:pointer;position:relative;display:block;font-size:19px;color:#35444c;font-weight:700;padding:1rem 1rem 1rem 1.25rem;text-decoration:none;border-left:.25rem solid transparent}\@media (min-width:1024px){.login-block__menu-section__heading{border-left-width:0;font-weight:700;padding:1.5rem}}.login-block__menu-section__heading.nested-active{border-left-color:#fba308}.login-block__menu-section__heading.nested-active:after{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.login-block__menu-section__ul{padding-left:0;list-style:none}.nested-active+.login-block__menu-section__ul{border-left:.25rem solid transparent}.login-block__menu-section__ul .login-block__menu-section__heading{color:#cbcfd2;font-size:16px;margin-top:.25rem;display:none}\@media (min-width:1024px){.login-block__menu-section__ul .login-block__menu-section__heading{display:block}}\@media (min-width:1024px){.login-block__menu-section__ul__li{width:calc(100% + 1px);border-right:.0625rem solid #e7e9ea}}\@media (min-width:1024px){.login-block__menu-section__ul__li:hover>.login-block__menu-section__ul__li__a{background-color:#f7f7f8}}.login-block__menu-section__ul__li__a{padding:1rem;display:block;color:#35444c;text-decoration:none;font-weight:700;font-size:13px;position:relative}.login-block__menu-section__ul__li__a:hover{text-decoration:none;cursor:pointer}.login-block__menu-section__ul__li__a.nested-active:after{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.login-block__menu-section__ul__li__a:after{top:1.25rem}\@media (min-width:1024px){.login-block__menu-section__ul__li__a{padding:.5rem}}.login-block__menu-section__ul__li__a:before{display:none}\@media (min-width:1024px){.login-block__menu-section__ul__li__a:before{display:block;background-size:100% 100%;background-size:contain;background-position:50%;background-repeat:no-repeat;display:inline;padding-left:1em;background-image:url(/stylelib/2_9/img/arrow-right_cta.svg);float:left;content:\"\";height:.625rem;margin:.1875rem .5rem 0}}\@media (min-width:1024px){.login-block__menu-section__ul__li__a--has-dropdown-shadow.nested-active:before{display:block}}\@media (max-width:1023.98px){.login-block__menu-section__ul__li__a--has-dropdown-shadow.nested-active:before{content:\"\";display:block;position:absolute;background-color:#f7f7f8;padding:1.6875rem;right:0;top:0}}\@media (min-width:1024px){.login-block__menu-section__ul__li__a--only-mobile{display:none}}.login-block__menu-section__level-wrap{display:-ms-flexbox;display:flex;height:100%}.login-block__menu-section__level-wrap .login-block__menu-section__level{width:25%;border-top:.0625rem solid #e7e9ea;border-right:.0625rem solid #e7e9ea;overflow-x:hidden;overflow-y:auto}.login-block__menu-section__level-wrap .login-block__menu-section__level:last-child{border-right:0}.login-block__menu-badge-container{position:absolute;top:.125rem;margin-left:.25rem}.login-block__logged-in-button{cursor:pointer;display:none;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;text-align:center;padding:1.25rem;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\@media (min-width:1024px){.login-block__logged-in-button{display:-ms-flexbox;display:flex}}.login-block__logged-in-button:before{display:none}.login-block__logged-in-button:hover{text-decoration:none;color:#263238}.login-block__salutation-desktop{font-size:11px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:6.25rem;display:block;color:#35444c}.login-block__salutation-desktop__my-huk-txt{font-size:13px;color:#35444c}"}};g([c()],_.prototype,"overrideApiEndpoints",void 0),g([c()],_.prototype,"overrideErrorMessages",void 0),g([u("breakpointChanged")],_.prototype,"breakpoint",void 0);export{_ as huk_login_block};