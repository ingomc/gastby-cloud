import{r as t,e as s,h as i,H as h,c as e}from"./p-8988f6c5.js";import{B as o,h as n,V as r,q as l,c as a}from"./p-0afcd70e.js";import{a as c}from"./p-90ca3f7c.js";const d=class{constructor(i){t(this,i),this.label=void 0,this.placeholder="Bitte wÃ¤hlen",this.modifier="default",this.disabled=!1,this.loading=!1,this.open=!1,this.hasSublabel=!1,this.withFilter=!1,this.filterPlaceholder="Filtern",this.options=[],this.validity="not-validated",this.errorMessage=[],this.filterDebounceTimeMs=100,this.hasFocus=!1,this.highlightedOptionIndex=void 0,this.filteredOptions=this.filterOptions(),this.componentName="select",this.filterString="",this.filtering=!1,this.filterOptionsDebounced=c(()=>this.filterOptions(),this.filterDebounceTimeMs),this.handleKeydown=t=>{switch(t.key.toLowerCase()){case"arrowdown":this.handleKeyArrowDown(t);break;case"arrowup":this.handleKeyArrowUp(t);break;case"escape":this.handleKeyEsc();break;case"enter":this.handleKeyEnter()}},this.handleOptionMouseLeave=()=>{this.highlightedOptionIndex=void 0},this.handleFocus=()=>{this.hasFocus||(document.addEventListener("keydown",this.handleKeydown),this.hasFocus=!0,this.focussed.emit())},this.handleBlur=t=>{const s=l(t);s&&this.element.contains(s)||(document.removeEventListener("keydown",this.handleKeydown),this.hasFocus=!1,this.open=!1,this.resetFilter(),this.blurred.emit(this.value))},this.handleClick=()=>{if(this.open)return this.element.blur(),void(this.open=!1);this.element.focus(),this.open=!0;let t=this.getSelectedOptionIndex();t||(t=this.getDefaultScrollToOptionIndex()),this.moveOptionIntoViewport(t)},this.handleFilterChanged=t=>{const s=t.target;s.value!==this.filterString&&(this.filtering=!1,this.filterString=s.value,this.highlightedOptionIndex=void 0,this.filterOptionsDebounced())},this.resetFilter=()=>{this.withFilter&&(this.filterString="",this.filteredOptions=this.preparedOptions)},this.focussed=s(this,"focussed",3),this.blurred=s(this,"blurred",3),this.valueChanged=s(this,"valueChanged",3)}componentDidLoad(){this.element.setAttribute("tabindex","0"),this.element.onclick=this.handleClick,this.element.onfocus=this.handleFocus,this.element.onblur=this.handleBlur}get optionsAreEmpty(){const t=this.filteredOptions[0];return this.filteredOptions.length<=1&&(!t||t.isPlaceholder)}handleKeyArrowUp(t){if(this.open){if(this.optionsAreEmpty)return;void 0===this.highlightedOptionIndex||this.highlightedOptionIndex<=1?this.highlightedOptionIndex=this.filteredOptions.length-1:this.highlightedOptionIndex--,this.moveOptionIntoViewport(this.highlightedOptionIndex),t.preventDefault()}else this.highlightedOptionIndex=this.getSelectedOptionIndex(),this.highlightedOptionIndex||(this.highlightedOptionIndex=this.getDefaultScrollToOptionIndex()),this.moveOptionIntoViewport(this.highlightedOptionIndex),this.open=!0}handleKeyArrowDown(t){if(this.open){if(this.optionsAreEmpty)return;void 0===this.highlightedOptionIndex||this.highlightedOptionIndex===this.filteredOptions.length-1?this.highlightedOptionIndex=1:this.highlightedOptionIndex++,this.moveOptionIntoViewport(this.highlightedOptionIndex,!1),t.preventDefault()}else this.highlightedOptionIndex=this.getSelectedOptionIndex(),this.highlightedOptionIndex||(this.highlightedOptionIndex=this.getDefaultScrollToOptionIndex()),this.moveOptionIntoViewport(this.highlightedOptionIndex),this.open=!0}handleKeyEnter(){if(void 0!==this.highlightedOptionIndex){const t=this.filteredOptions[this.highlightedOptionIndex].value;this.value!==t&&this.handleValueChanged(t),this.resetFilter(),this.open=!1}}handleKeyEsc(){this.open=!1,this.resetFilter()}handleOptionMouseEnter(t){this.highlightedOptionIndex=t}handleFilterClick(t){this.open&&(t.preventDefault(),t.stopPropagation())}handleSelectOption(t,s){this.open&&(t.preventDefault(),t.stopPropagation(),this.value!==s.value&&this.handleValueChanged(s.value),this.open=!1)}handleValueChanged(t){this.value=t,this.valueChanged.emit(t),this.resetFilter()}updateHighlightedOptionIndex(){this.highlightedOptionIndex=this.getSelectedOptionIndex()}onOptionsChange(t){this.options=t,this.preparedOptions=[],this.filterOptions()}onPlaceholderChange(t){this.placeholder=t,this.preparedOptions=[],this.filterOptions()}moveOptionIntoViewport(t,s=!0){const i=this.dropdown.querySelectorAll(".select__option")[t],h=this.optionsContainer.scrollHeight,e=this.optionsContainer.clientHeight,o=i.offsetTop,n=i.clientHeight;let r=this.optionsContainer.scrollTop;o>r&&o<r+e-n||((r=s?o+1:o-e+n)>h&&(r=h),r<0&&(r=0),this.optionsContainer.scrollTop=r)}prepareOptionsOnce(){if(!this.preparedOptions||!this.preparedOptions.length){const t=[this.getPlaceholderOption(),...this.options].map(t=>Object.assign(Object.assign({},t),{labelLowerCase:t.label.toLowerCase()}));this.preparedOptions=t}}filterOptions(){if(this.prepareOptionsOnce(),!this.filterString)return this.filteredOptions=this.preparedOptions,this.filteredOptions;const t=this.filterString.toLowerCase();this.filtering=!0;const s=[];for(const i of this.preparedOptions){if(!this.filtering)return this.preparedOptions;(i.isPlaceholder||i.labelLowerCase.includes(t))&&s.push(i)}return this.filtering=!1,this.filteredOptions=s,this.filteredOptions}getSelectedOption(){return this.options.find(t=>t.value==this.value)||this.filteredOptions[0]}getSelectedOptionIndex(){const t=this.filteredOptions.findIndex(t=>t.value===this.value);return-1===t?0:t}getDefaultScrollToOptionIndex(){const t=this.options.findIndex(t=>!0===t.initialScrollTo);return-1===t?0:t+1}getPlaceholderOption(){return{label:this.placeholder,value:"",isPlaceholder:!0}}renderOption(t,s,h=!1){const e=this.filteredOptions[s];if(e)return i("div",{class:o(this,"option",h&&"selected",e.isPlaceholder&&"is-placeholder"),onClick:t=>{this.handleSelectOption(t,e)},onMouseEnter:()=>{this.handleOptionMouseEnter(s)},onMouseLeave:this.handleOptionMouseLeave},t&&void 0!==this.label&&i("div",{class:o(this,"option__fieldlabel")},this.label),i("div",{class:o(this,"option__label")},e.label),this.hasSublabel&&!!e.sublabel&&i("div",{class:o(this,"option__sublabel")},e.sublabelPrefix&&i("span",{class:o(this,"option__sublabel__prefix")},e.sublabelPrefix),e.sublabel))}renderFilter(){return i("div",{class:o(this,"dropdown__filter"),onClick:t=>{this.handleFilterClick(t)}},this.filterString.length>0&&i("div",{class:o(this,"dropdown__filter__reset"),onClick:this.resetFilter},i("huk-icon",{icon:"close-circle--gray"})),i("input",{class:o(this,"dropdown__filter__input"),onInput:this.handleFilterChanged,onBlur:this.handleBlur,ref:t=>this.filterInput=t,value:this.filterString,placeholder:this.filterPlaceholder}))}render(){const t=n({componentName:this.componentName,modifier:[this.modifier,this.disabled&&"is-disabled",r.getCssIsInvalid(this.validity),r.getCssIsValid(this.validity),this.loading&&"is-loading",this.hasFocus&&"has-focus",this.open&&"is-open",this.label&&"has-label",!!this.value&&"has-value",this.hasSublabel&&"has-sublabel"]}),s=a(this.errorMessage);return i(h,{class:t},i("div",null,i("div",{class:o(this,"container")},i("div",{class:o(this,"inner")},i("div",{class:o(this,"selected")},this.renderOption(!0,this.getSelectedOptionIndex())),i("div",{class:o(this,"dropdown"),ref:t=>this.dropdown=t},this.renderOption(!0,0),this.withFilter&&this.renderFilter(),i("div",{class:o(this,"dropdown__options"),ref:t=>this.optionsContainer=t},this.filteredOptions.map((t,s)=>{if(!t.isPlaceholder)return this.renderOption(0===s,s,s===this.highlightedOptionIndex)}))))),r.isInvalid(this.validity)&&s.map(t=>i("span",{class:o(this,"error")},t))))}get element(){return e(this)}static get watchers(){return{value:["updateHighlightedOptionIndex"],options:["onOptionsChange"],placeholder:["onPlaceholderChange"]}}static get style(){return".huk-text--white{color:#fff}.huk-text--orange{color:#fba308}.huk-text--mint{color:#00abba}.huk-text--mint-dark{color:#055e5f}\@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}\@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.select{position:relative;display:block;background:transparent;margin-bottom:1rem;outline:0!important;border-radius:.25rem}\@media (min-width:768px){.select{margin-bottom:1.5rem}}.select__container{position:relative;margin-bottom:0}.select__inner{-webkit-transition:border .15s ease-in-out 0ms,-webkit-box-shadow .15s ease-in-out 0ms;transition:border .15s ease-in-out 0ms,-webkit-box-shadow .15s ease-in-out 0ms;transition:border .15s ease-in-out 0ms,box-shadow .15s ease-in-out 0ms;transition:border .15s ease-in-out 0ms,box-shadow .15s ease-in-out 0ms,-webkit-box-shadow .15s ease-in-out 0ms;border:1px solid #e7e9ea;border-radius:.25rem;background-color:#fff}.select__inner:hover{-webkit-box-shadow:0 .125rem .25rem 0 rgba(79,93,101,.24);box-shadow:0 .125rem .25rem 0 rgba(79,93,101,.24)}.select__inner:after{-webkit-transition:border .15s ease-in-out 0ms;transition:border .15s ease-in-out 0ms;content:\"\";display:block;width:1rem;height:.666rem;position:absolute;right:1rem;top:50%;margin-top:-.3125rem;background-size:100% auto;background-image:url(/stylelib/2_9/img/arrow-down_neutral_600.svg);background-color:transparent;border-top:0;border-right:0;border-bottom:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}\@media (min-width:576px){.select__inner:after{right:1.5rem}}.select__selected{height:100%}.select__dropdown{display:block;visibility:hidden;pointer-events:none;position:absolute;top:0;left:0;right:0;background:#fff;border:1px solid #cbcfd2;border-radius:.25rem;-webkit-box-shadow:0 .125rem .25rem 0 rgba(79,93,101,.24);box-shadow:0 .125rem .25rem 0 rgba(79,93,101,.24);z-index:1100}.select__dropdown__filter{position:relative}.select__dropdown__filter__reset{position:absolute;right:.7rem;top:.7rem;font-size:23px;cursor:pointer}\@media (min-width:576px){.select__dropdown__filter__reset{top:1.1rem;right:1.2rem}}.select__dropdown__filter__input{display:block;border:0;padding:.85rem 1.5rem .85rem 1rem;font-size:16px;border-top:1px solid #e7e9ea;color:#35444c;width:100%}\@media (min-width:576px){.select__dropdown__filter__input{padding-top:1.2rem;padding-bottom:1.2rem;padding-left:1.5rem;font-size:19px}}.select__dropdown__filter__input:focus{outline:0}.select__dropdown__filter__input::-webkit-input-placeholder{color:#97a0a5}.select__dropdown__filter__input::-moz-placeholder{color:#97a0a5}.select__dropdown__filter__input:-ms-input-placeholder{color:#97a0a5}.select__dropdown__filter__input::-ms-input-placeholder{color:#97a0a5}.select__dropdown__filter__input::placeholder{color:#97a0a5}.select__dropdown__filter__input::-ms-clear{display:none}.select__dropdown__options{position:relative;max-height:17rem;overflow-y:auto;border-top:1px solid #e7e9ea}\@media (min-width:576px){.select__dropdown__options{max-height:22.2rem}}.select__dropdown__options .select__option{border-bottom:1px solid #e7e9ea}.select__dropdown__options .select__option:last-child{border-bottom:0}.select__option{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;padding-top:.85rem;padding-left:1rem;padding-bottom:.85rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-transition:background .2s ease-in-out 0ms;transition:background .2s ease-in-out 0ms}\@media (min-width:576px){.select__option{padding-top:1.2rem;padding-bottom:1.2rem;padding-left:1.5rem}}.select__option--selected,.select__option:focus,.select__option:hover{background:#f7f7f8}.select__option:active{background:#e7e9ea}.select__option--is-placeholder{color:#97a0a5;background:inherit;pointer-events:none}.select__option:first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.select__option:last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.select__option__fieldlabel{font-size:13px;color:#68747a}.select__option__label{font-size:16px;padding-right:3rem}\@media (min-width:576px){.select__option__label{font-size:19px}}.select__option__label__prefix{color:#fb9105;padding-right:.25rem;font-weight:700}.select__option__sublabel{margin-top:.25rem;font-size:13px}.select__option__sublabel__prefix{color:#fb9105;padding-right:.25rem;font-weight:700}.select__error{display:block;color:#c92a2a;font-size:13px;margin-top:.5rem}\@media (min-width:576px){.select__error{font-size:16px}}.select--is-open .select__inner:hover{-webkit-box-shadow:none;box-shadow:none}.select--is-open .select__inner:after{-webkit-transform:rotate(180deg);transform:rotate(180deg);z-index:1101}.select--is-open .select__dropdown{visibility:visible;pointer-events:auto}.select--has-focus .select__inner{border:1px solid #cbcfd2}.select--has-label .select__option{padding-top:.5rem;padding-bottom:.5rem}\@media (min-width:576px){.select--has-label .select__option{padding-top:.6rem;padding-bottom:.6rem}}.select--has-label .select__option__fieldlabel{font-size:13px;padding-right:3rem;color:#68747a}.select--has-label .select__option__label{margin-top:-2px;font-size:16px}\@media (min-width:576px){.select--has-label .select__option__label{font-size:19px;margin-top:1px}}.select--has-label.select--small .select__option{padding-top:.5rem!important;padding-bottom:.5rem!important}.select--is-disabled{opacity:.5;-webkit-text-fill-color:#35444c;-webkit-opacity:.5;cursor:not-allowed;pointer-events:none}.select--is-invalid .select__inner:after{background-image:url(/stylelib/2_9/img/arrow-down_red-darker.svg)}.select--is-invalid .select__container .select__inner{border:2px solid #c92a2a}.select--is-invalid .select__container .select__select{border:0}.select--is-invalid .select__dropdown{border:2px solid #c92a2a}.select--is-invalid .select__input{padding:.87rem 1rem}\@media (min-width:576px){.select--is-invalid .select__input{padding:1.3rem 4rem 1.3rem 1.7rem}}.select--is-invalid .select__helptext,.select--is-invalid .select__label{color:#c92a2a}.select--small .select__container{margin-bottom:.5rem}.select--small .select__option{padding-top:.85rem;padding-left:1rem;padding-bottom:.85rem}.select--small .select__option__label{font-size:16px}.select--small .select__inner:after{right:1rem}.select--small .select__error{font-size:13px}.select--small.select--is-invalid .select__input{padding:.87rem 1rem}.select--has-sublabel.select--is-open.select--has-value .select__inner:after{margin-top:-.9em}"}};export{d as huk_select};