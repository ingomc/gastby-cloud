import{r as t,h as i,H as s}from"./p-8988f6c5.js";import{v as h,h as e,B as a}from"./p-0afcd70e.js";import{g as n}from"./p-a283e139.js";const o=class{constructor(i){t(this,i),this.variant="",this.modifier="",this.forgottenCredentialsLink="",this.forgottenCredentialsLinkText="Zugangsdaten vergessen?",this.loginLabelText="Anmelden",this.passwordLabelText="Passwort/PIN",this.usernameLabelText="Benutzerkennung/-name",this.usernameEmptyError="Benutzerkennung/-name kann nicht leer sein.",this.passwordEmptyError="Passwort/PIN kann nicht leer sein.",this.loginFailedText="Login ist nicht mÃ¶glich.",this.requestFailedText="Anfrage kann nicht bearbeitet werden.",this.redirectUrlAfterLogin="",this.headLabel="",this.isLoginMenuVisible=!0,this.isAuthenticatedMenuActive=!1,this.isLoginFailedMessageVisible=!1,this.loginFailedMessage="",this.username="",this.password="",this.isPasswordInvalid="not-validated",this.passwordInvalidMessage="",this.isUsernameInvalid="not-validated",this.usernameInvalidMessage="",this.loginLoadingStatus=!1,this.visiblePassword=!1,this.componentName="login-section",this.redirectPage=()=>{let t=h("redirect-to");t||(t=this.redirectUrlAfterLogin),""!==t.trim()&&(window.location.href=t)},this.loginUser=async t=>{t.preventDefault();let i=!1;return""===this.username.trim()&&(this.isUsernameInvalid="invalid",this.usernameInvalidMessage=this.usernameEmptyError,i=!0),""===this.password.trim()&&(this.isPasswordInvalid="invalid",this.passwordInvalidMessage=this.passwordEmptyError,i=!0),!i&&(this.loginLoadingStatus=!0,await this.authService.login(this.username,this.password).then(()=>{this.isLoginMenuVisible=!1,this.username="",this.password="",this.isLoginFailedMessageVisible=!1,this.loginFailedMessage="",this.isPasswordInvalid="not-validated",this.isUsernameInvalid="not-validated"}).catch(()=>{this.loginFailedMessage=this.loginFailedText,this.isLoginFailedMessageVisible=!0,this.passwordInvalidMessage="",this.usernameInvalidMessage="",this.isPasswordInvalid="invalid",this.isUsernameInvalid="invalid"}).then(()=>{this.loginLoadingStatus=!1}),!1)}}async componentWillLoad(){this.authService=await n()}render(){const t=e({componentName:this.componentName,variant:this.variant,modifier:this.modifier});return i(s,{class:t},i("div",{class:a(this,"wrapper")},i("div",{class:a(this,"head-label")},this.headLabel),i("div",{class:{[a(this,"unauthenticated")]:!0,"dropdown-visible":this.isLoginMenuVisible}},i("form",{class:a(this,"login-dropdown"),onSubmit:this.loginUser,autocomplete:"off"},i("huk-input",{onValueChanged:t=>{this.username=t.detail,this.isUsernameInvalid="not-validated",this.isLoginFailedMessageVisible=!1},onBlurred:()=>{""===this.username?this.isUsernameInvalid="not-validated":this.username.length<6?this.isUsernameInvalid="invalid":this.username.length>=6&&(this.isUsernameInvalid="valid")},name:"username",autocomplete:"off",maxlength:60,value:this.username,label:this.usernameLabelText,modifier:"small",validity:this.isUsernameInvalid,errorMessage:this.usernameInvalidMessage}),i("huk-input",{onValueChanged:t=>{this.password=t.detail,this.isPasswordInvalid="not-validated",this.isLoginFailedMessageVisible=!1},onBlurred:()=>{""===this.password?this.isPasswordInvalid="not-validated":this.password.length<6?this.isPasswordInvalid="invalid":this.password.length>=6&&(this.isPasswordInvalid="valid")},autocomplete:"off",maxlength:16,value:this.password,label:this.passwordLabelText,modifier:"small",type:this.visiblePassword?"text":"password",button:this.visiblePassword?"eye-disabled":"eye",onButtonClicked:()=>{this.visiblePassword=!this.visiblePassword},validity:this.isPasswordInvalid,errorMessage:this.passwordInvalidMessage}),this.isLoginFailedMessageVisible&&i("huk-error",{message:this.loginFailedMessage}),i("div",{class:a(this,"button-container")},i("div",{class:a(this,"button-container__left")},i("huk-button",{modifier:"small link cta",href:this.forgottenCredentialsLink,label:this.forgottenCredentialsLinkText})),i("div",{class:a(this,"button-container__right")},i("huk-button",{loading:this.loginLoadingStatus,variant:"cta",modifier:"small forward",label:this.loginLabelText,buttonType:"submit"})))))))}static get style(){return".huk-text--white{color:#fff}.huk-text--orange{color:#fba308}.huk-text--mint{color:#00abba}.huk-text--mint-dark{color:#055e5f}\@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}\@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.login-section{display:block;position:relative}.login-section huk-input{margin-bottom:.25rem}.login-section__button-container{display:-ms-flexbox;display:flex}.login-section__button-container__left{-ms-flex:1 0 auto;flex:1 0 auto}.login-section__button-container__right{-ms-flex:0 1 auto;flex:0 1 auto}.login-section--standalone .login-section__wrapper{max-width:43.75rem;margin:auto;border:.0625rem solid #e7e9ea;border-radius:.25rem}.login-section--standalone .login-section__head-label{border-bottom:.0625rem solid #e7e9ea;padding:1rem 1.5rem;text-transform:uppercase;font-weight:700;font-size:16px;color:#35444c}.login-section--standalone .login-section__unauthenticated{padding:1.5rem}"}};export{o as huk_login_section};